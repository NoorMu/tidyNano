<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>tidyNano Vignette • tidyNano</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="tidyNano Vignette">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidyNano</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/tidyNano.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>tidyNano Vignette</h1>
                        <h4 class="author">Sean Nguyen</h4>
            
            <h4 class="date">2018-11-16</h4>
      
      
      <div class="hidden name"><code>tidyNano.Rmd</code></div>

    </div>

    
    
<div id="tidynano-vignette" class="section level1">
<h1 class="hasAnchor">
<a href="#tidynano-vignette" class="anchor"></a>tidyNano Vignette</h1>
<p>tidyNano is a package that imports raw Nanosight data and faciliates the process of tidying the data so it is suitable for visualizing with ggplot2 and data manipulation with dplyr. tidyNano also has functions to facilitate the rapid generation of summary statistics by groups to assist with calculating technical replicate and within group mean, standard deviation, and standard error.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyNano)
<span class="kw">library</span>(tidyverse)</code></pre></div>
<div id="nanoimport" class="section level2">
<h2 class="hasAnchor">
<a href="#nanoimport" class="anchor"></a>nanoimport</h2>
<p>This is an example raw Nanosight .csv output file and is not easily imported with <code>read.csv()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">file &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"beads.csv"</span>, <span class="dt">package =</span> <span class="st">"tidyNano"</span>)

<span class="kw">read.csv</span>(file) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()
<span class="co">#&gt;             NTA.Experiment.Summary.File                 X X.1 X.2 X.3 X.4</span>
<span class="co">#&gt; 1 Created with NTA 3.2 Dev Build 3.2.16                                  </span>
<span class="co">#&gt; 2                                                                        </span>
<span class="co">#&gt; 3                  [Experiment Details]                                  </span>
<span class="co">#&gt; 4                      Software Version           Unknown                </span>
<span class="co">#&gt; 5                       Experiment Name std_combined.nano                </span>
<span class="co">#&gt; 6                           Sample Name                                  </span>
<span class="co">#&gt;   X.5 X.6 X.7 X.8 X.9 X.10 X.11 X.12 X.13</span>
<span class="co">#&gt; 1                                        </span>
<span class="co">#&gt; 2                                        </span>
<span class="co">#&gt; 3                                        </span>
<span class="co">#&gt; 4                                        </span>
<span class="co">#&gt; 5                                        </span>
<span class="co">#&gt; 6</span></code></pre></div>
<p><code>nanoimport</code> is a function that extracts the particle data from raw a nanosight .csv file and creates a dataframe that is suitable for cleaning within R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/nanoimport.html">nanoimport</a></span>(file) 
<span class="co">#&gt; NTA version: 3.2</span>
<span class="co">#&gt; Sample name:</span>
<span class="co">#&gt; Number of parameters detected: 1</span>
<span class="co">#&gt; Dilution factor detected: 1</span>
<span class="co">#&gt; Auto name = FALSE</span>
<span class="co">#&gt; Custom name: NULL</span>
<span class="co">#&gt; Dilution value: 1 (Didn't parse)</span>

<span class="kw">head</span>(data)
<span class="co">#&gt;   particle_size std_10000_yes_2_00 std_10000_yes_2_01 std_10000_yes_2_02</span>
<span class="co">#&gt; 1           0.5                  0                  0                  0</span>
<span class="co">#&gt; 2           1.5                  0                  0                  0</span>
<span class="co">#&gt; 3           2.5                  0                  0                  0</span>
<span class="co">#&gt; 4           3.5                  0                  0                  0</span>
<span class="co">#&gt; 5           4.5                  0                  0                  0</span>
<span class="co">#&gt; 6           5.5                  0                  0                  0</span>
<span class="co">#&gt;   std_10000_no_2_00 std_10000_no_2_01 std_10000_no_2_02 std_10000_yes_1_00</span>
<span class="co">#&gt; 1                 0                 0                 0                  0</span>
<span class="co">#&gt; 2                 0                 0                 0                  0</span>
<span class="co">#&gt; 3                 0                 0                 0                  0</span>
<span class="co">#&gt; 4                 0                 0                 0                  0</span>
<span class="co">#&gt; 5                 0                 0                 0                  0</span>
<span class="co">#&gt; 6                 0                 0                 0                  0</span>
<span class="co">#&gt;   std_10000_yes_1_01 std_10000_yes_1_02 std_10000_no_1_00</span>
<span class="co">#&gt; 1                  0                  0                 0</span>
<span class="co">#&gt; 2                  0                  0                 0</span>
<span class="co">#&gt; 3                  0                  0                 0</span>
<span class="co">#&gt; 4                  0                  0                 0</span>
<span class="co">#&gt; 5                  0                  0                 0</span>
<span class="co">#&gt; 6                  0                  0                 0</span>
<span class="co">#&gt;   std_10000_no_1_01 std_10000_no_1_02</span>
<span class="co">#&gt; 1                 0                 0</span>
<span class="co">#&gt; 2                 0                 0</span>
<span class="co">#&gt; 3                 0                 0</span>
<span class="co">#&gt; 4                 0                 0</span>
<span class="co">#&gt; 5                 0                 0</span>
<span class="co">#&gt; 6                 0                 0</span></code></pre></div>
</div>
<div id="nanotidy" class="section level2">
<h2 class="hasAnchor">
<a href="#nanotidy" class="anchor"></a>nanotidy</h2>
<p><code>nanotidy</code> is a function that facilitates the conversion of a dataframe to make it tidy for easy data visualization with ggplot2 and data manipulation with dplyr.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tidy_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/nanoimport.html">nanoimport</a></span>(file) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="../reference/nanotidy.html">nanotidy</a></span>( <span class="dt">sep_var =</span> <span class="kw">c</span>(<span class="st">"Sample"</span>, <span class="st">"Dilution"</span>,<span class="st">"Filter"</span>,
                       <span class="st">"Injection"</span>,<span class="st">"Tech_rep"</span>)) 
<span class="co">#&gt; NTA version: 3.2</span>
<span class="co">#&gt; Sample name:</span>
<span class="co">#&gt; Number of parameters detected: 1</span>
<span class="co">#&gt; Dilution factor detected: 1</span>
<span class="co">#&gt; Auto name = FALSE</span>
<span class="co">#&gt; Custom name: NULL</span>
<span class="co">#&gt; Dilution value: 1 (Didn't parse)</span>

<span class="kw">head</span>(tidy_data)
<span class="co">#&gt;   particle_size Sample Dilution Filter Injection Tech_rep Count True_count</span>
<span class="co">#&gt; 1           0.5    std    10000    yes         2        0     0          0</span>
<span class="co">#&gt; 2           1.5    std    10000    yes         2        0     0          0</span>
<span class="co">#&gt; 3           2.5    std    10000    yes         2        0     0          0</span>
<span class="co">#&gt; 4           3.5    std    10000    yes         2        0     0          0</span>
<span class="co">#&gt; 5           4.5    std    10000    yes         2        0     0          0</span>
<span class="co">#&gt; 6           5.5    std    10000    yes         2        0     0          0</span></code></pre></div>
<p>Once the data is in the tidy format it can be easily visualized using existing libraries such as ggplot2.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tidy_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> particle_size, <span class="dt">y =</span> True_count, <span class="dt">color =</span> Tech_rep)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(Injection <span class="op">~</span><span class="st"> </span>Filter)</code></pre></div>
<p><img src="tidyNano_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
<div id="nanolyze" class="section level2">
<h2 class="hasAnchor">
<a href="#nanolyze" class="anchor"></a>nanolyze</h2>
<p><code>nanolyze</code> is a function that is able to quickly summarize data by groups. The first argument is the number of variables to group by. The second argument name is the prefix that is added to the mean, sd and se summary, the default name is “Param”. The third argument is param_var which is the numeric variable that is to be summarized. The output of this function is a dataframe of the grouped variables, column N with number of values that were summarized, column mean for the mean, column sd for standard deviation, and column se for standard error of the mean. Here we see that the technical replicates will be averaged.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Tech_avg_data &lt;-<span class="st"> </span>tidy_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/nanolyze.html">nanolyze</a></span>(particle_size, Sample, Dilution, Filter, Injection, 
           <span class="dt">name =</span> <span class="st">"Tech_rep"</span>,
           <span class="dt">param_var =</span> True_count)

<span class="kw">head</span>(Tech_avg_data)
<span class="co">#&gt; # A tibble: 6 x 9</span>
<span class="co">#&gt; # Groups:   particle_size, Sample, Dilution, Filter [3]</span>
<span class="co">#&gt;   particle_size Sample Dilution Filter Injection Tech_rep_N Tech_rep_mean</span>
<span class="co">#&gt;           &lt;dbl&gt; &lt;fct&gt;     &lt;dbl&gt; &lt;fct&gt;  &lt;fct&gt;          &lt;int&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1           0.5 std       10000 no     1                  3             0</span>
<span class="co">#&gt; 2           0.5 std       10000 no     2                  3             0</span>
<span class="co">#&gt; 3           0.5 std       10000 yes    1                  3             0</span>
<span class="co">#&gt; 4           0.5 std       10000 yes    2                  3             0</span>
<span class="co">#&gt; 5           1.5 std       10000 no     1                  3             0</span>
<span class="co">#&gt; 6           1.5 std       10000 no     2                  3             0</span>
<span class="co">#&gt; # ... with 2 more variables: Tech_rep_sd &lt;dbl&gt;, Tech_rep_se &lt;dbl&gt;</span></code></pre></div>
<p>The technical average data can be visualized with ggpplot2.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Tech_avg_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> particle_size, <span class="dt">y =</span> Tech_rep_mean, <span class="dt">color =</span> Injection)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>( <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>Filter) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="tidyNano_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>In this experiment, a sample was read twice by the Nanosight and thus we can average the means by Injection to obtain a single mean value by using the <code>nanolyze</code> function again. Notice the different use of the <code>name</code> and <code>param_var</code> arguments.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Injection_avg_data &lt;-<span class="st"> </span>Tech_avg_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="../reference/nanolyze.html">nanolyze</a></span>(particle_size, Sample, Dilution, Filter, 
           <span class="dt">name =</span> <span class="st">"Injection"</span>,
           <span class="dt">param_var =</span> Tech_rep_mean)

<span class="kw">head</span>(Injection_avg_data)
<span class="co">#&gt; # A tibble: 6 x 8</span>
<span class="co">#&gt; # Groups:   particle_size, Sample, Dilution [3]</span>
<span class="co">#&gt;   particle_size Sample Dilution Filter Injection_N Injection_mean</span>
<span class="co">#&gt;           &lt;dbl&gt; &lt;fct&gt;     &lt;dbl&gt; &lt;fct&gt;        &lt;int&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt; 1           0.5 std       10000 no               2              0</span>
<span class="co">#&gt; 2           0.5 std       10000 yes              2              0</span>
<span class="co">#&gt; 3           1.5 std       10000 no               2              0</span>
<span class="co">#&gt; 4           1.5 std       10000 yes              2              0</span>
<span class="co">#&gt; 5           2.5 std       10000 no               2              0</span>
<span class="co">#&gt; 6           2.5 std       10000 yes              2              0</span>
<span class="co">#&gt; # ... with 2 more variables: Injection_sd &lt;dbl&gt;, Injection_se &lt;dbl&gt;</span></code></pre></div>
<p>We can again use ggplot2 to visualize the mean injection data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Injection_avg_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> particle_size, <span class="dt">y =</span> Injection_mean, <span class="dt">color =</span> Filter)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>( <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Filter)</code></pre></div>
<p><img src="tidyNano_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>We can also use dplyr to filter on values less than 300nm easily.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Injection_avg_data <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(particle_size <span class="op">&lt;</span><span class="dv">300</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> particle_size, <span class="dt">y =</span> Injection_mean, <span class="dt">color =</span> Filter)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_line</span>( <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Filter) </code></pre></div>
<div class="figure">
<img src="tidyNano_files/figure-html/unnamed-chunk-10-1.png" alt="MY FIGURE CAPTION" width="700"><p class="caption">
MY FIGURE CAPTION
</p>
</div>
</div>
<div id="nanocount" class="section level2">
<h2 class="hasAnchor">
<a href="#nanocount" class="anchor"></a>nanocount</h2>
<p><code>nanocount</code> is a function that is able to calculate the total sum of particles by group.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Injection_avg_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="../reference/nanocount.html">nanocount</a></span>(Sample, Dilution, Filter, 
            <span class="dt">param_var =</span> Injection_mean)
<span class="co">#&gt; # A tibble: 2 x 5</span>
<span class="co">#&gt; # Groups:   Sample, Dilution [?]</span>
<span class="co">#&gt;   Sample Dilution Filter Particle_N Particle_count</span>
<span class="co">#&gt;   &lt;fct&gt;     &lt;dbl&gt; &lt;fct&gt;       &lt;int&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt; 1 std       10000 no           1000        1.64e13</span>
<span class="co">#&gt; 2 std       10000 yes          1000        1.29e13</span></code></pre></div>
<p>We can also use dplyr verbs before nanocount. To calculate the total number of particles less than 100nm the filter command can be used.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Injection_avg_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(particle_size <span class="op">&lt;</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="../reference/nanocount.html">nanocount</a></span>(Sample, Dilution, Filter, 
            <span class="dt">param_var =</span> Injection_mean)
<span class="co">#&gt; # A tibble: 2 x 5</span>
<span class="co">#&gt; # Groups:   Sample, Dilution [?]</span>
<span class="co">#&gt;   Sample Dilution Filter Particle_N Particle_count</span>
<span class="co">#&gt;   &lt;fct&gt;     &lt;dbl&gt; &lt;fct&gt;       &lt;int&gt;          &lt;dbl&gt;</span>
<span class="co">#&gt; 1 std       10000 no            100        1.02e13</span>
<span class="co">#&gt; 2 std       10000 yes           100        7.55e12</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#tidynano-vignette">tidyNano Vignette</a><ul class="nav nav-pills nav-stacked">
<li><a href="#nanoimport">nanoimport</a></li>
      <li><a href="#nanotidy">nanotidy</a></li>
      <li><a href="#nanolyze">nanolyze</a></li>
      <li><a href="#nanocount">nanocount</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sean Nguyen L..</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
